import{u as p,j as e,d as N,a as l,P as u,B as r,g as f,b as g,L,T as j}from"./index-B9-aZz-R.js";import{b as S}from"./event.api-Myid_Vzp.js";import{C as y}from"./Card-CTvGjFhB.js";import{S as E}from"./Stars-BFtIPY_r.js";import{u as b}from"./useAppSelector-BTsF-SKP.js";import{T as h}from"./TextField-CG6ONMtj.js";const T=({event:t})=>{const c=p();return e.jsx(y,{title:t.name,caption:e.jsx(E,{rating:t.average_rating}),description:`Средняя оценка: ${t.average_rating}`,actionDescription:"Перейти к мероприятию",onClick:()=>c(N(t.id.toString()))})},F=()=>{const t=p(),{city:c}=b(s=>s.system),{isLoading:v,data:a}=S(c),[i,x]=l.useState(""),[o,m]=l.useState([]),[n,d]=l.useState(1);return l.useEffect(()=>{a&&m(a.slice(0,20))},[a]),l.useEffect(()=>{let s=[...(a==null?void 0:a.slice((n-1)*20,n*20))||[]];console.log(s),i!==""&&i&&(s=o.filter(({name:C,average_rating:k})=>C.toLowerCase().includes(i.toLowerCase())||String(k).toLowerCase().includes(i.toLowerCase()))),m(s)},[i,a,n]),v?e.jsxs(u,{className:"flex-1 flex flex-col p-2",children:[e.jsxs("div",{className:"flex gap-3 m-3",children:[e.jsx(r,{onClick:()=>t(f()),variant:"link-main",children:"Предметы"}),e.jsx(r,{onClick:()=>t(g()),variant:"link-main",children:"Мероприятия"}),e.jsx(h,{value:i,onChange:s=>x(s.target.value),label:"Поиск..."})]}),e.jsx("div",{className:"flex-1 flex justify-center items-center",children:e.jsx(L,{})})]}):e.jsxs(u,{className:"flex-1 flex flex-col p-2",children:[e.jsxs("div",{className:"flex gap-3 m-3",children:[e.jsx(r,{onClick:()=>t(f()),variant:"link-main",children:"Предметы"}),e.jsx(r,{onClick:()=>t(g()),variant:"link-main",children:"Мероприятия"}),e.jsx(h,{value:i,onChange:s=>x(s.target.value),label:"Поиск..."})]}),o.length!==0?e.jsxs(e.Fragment,{children:[e.jsxs(j.Title,{className:"m-2",as:"h4",children:["Страница ",n]}),e.jsx("div",{className:"grid flex-1 grid-cols-3 max-sm:grid-cols-1 max p-2 gap-3",children:o.map(s=>e.jsx(T,{event:s},s.id))}),e.jsxs("div",{className:"flex justify-center gap-3 m-3",children:[n!==1&&e.jsx(r,{onClick:()=>d(s=>s-1),variant:"link-main",children:"Назад"}),n*20<Number(a==null?void 0:a.length)&&e.jsx(r,{onClick:()=>d(s=>s+1),variant:"link-main",children:"Вперед"})]})]}):e.jsx("div",{className:"flex flex-1 justify-center items-center",children:e.jsx(j.Title,{as:"h3",children:"Простите, нет мероприятий"})})]})};export{F as default};
