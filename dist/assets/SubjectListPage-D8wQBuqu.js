import{u as h,j as e,e as k,a as l,P as u,B as r,g,b as j,L as y,T as f}from"./index-B9-aZz-R.js";import{C as N}from"./Card-CTvGjFhB.js";import{S as L}from"./Stars-BFtIPY_r.js";import{a as w}from"./subject.api-gXnHSYT9.js";import{u as T}from"./useAppSelector-BTsF-SKP.js";import{T as p}from"./TextField-CG6ONMtj.js";const b=({subject:t})=>{const c=h();return e.jsx(N,{title:t.name,description:`Средняя оценка: ${t.average_rating}`,actionDescription:"Перейти к предмету",caption:e.jsx(L,{rating:t.average_rating}),onClick:()=>c(k(t.id.toString()))})},F=()=>{const t=h(),{city:c}=T(a=>a.system),{data:s,isLoading:v}=w(c),[i,m]=l.useState(""),[o,x]=l.useState([]),[n,d]=l.useState(1);return l.useEffect(()=>{s&&x(s.slice(0,20))},[s]),l.useEffect(()=>{let a=[...(s==null?void 0:s.slice((n-1)*20,n*20))||[]];console.log(a),i!==""&&i&&(a=o.filter(({name:C,average_rating:S})=>C.toLowerCase().includes(i.toLowerCase())||String(S).toLowerCase().includes(i.toLowerCase()))),x(a)},[i,s,n]),v?e.jsxs(u,{className:"flex-1 p-2 flex flex-col",variant:"primary",children:[e.jsxs("div",{className:"flex gap-3 m-3",children:[e.jsx(r,{onClick:()=>t(g()),variant:"link-main",children:"Предметы"}),e.jsx(r,{onClick:()=>t(j()),variant:"link-main",children:"Мероприятия"}),e.jsx(p,{value:i,onChange:a=>m(a.target.value),label:"Поиск..."})]}),e.jsx("div",{className:"flex-1 flex justify-center items-center",children:e.jsx(y,{})})]}):e.jsxs(u,{className:"flex-1 p-2",variant:"primary",children:[e.jsxs("div",{className:"flex gap-3 m-3",children:[e.jsx(r,{onClick:()=>t(g()),variant:"link-main",children:"Предметы"}),e.jsx(r,{onClick:()=>t(j()),variant:"link-main",children:"Мероприятия"}),e.jsx(p,{value:i,onChange:a=>m(a.target.value),label:"Поиск..."})]}),o.length!==0?e.jsxs(e.Fragment,{children:[e.jsxs(f.Title,{className:"m-2",as:"h4",children:["Страница ",n]}),e.jsx("div",{className:"grid grid-cols-3 max-sm:grid-cols-1 max p-2 gap-3",children:o.map(a=>e.jsx(b,{subject:a},a.id))}),e.jsxs("div",{className:"flex justify-center gap-3 m-3",children:[n!==1&&e.jsx(r,{onClick:()=>d(a=>a-1),variant:"link-main",children:"Назад"}),n*20<Number(s==null?void 0:s.length)&&e.jsx(r,{onClick:()=>d(a=>a+1),variant:"link-main",children:"Вперед"})]})]}):e.jsx("div",{className:"flex justify-center items-center min-w-20",children:e.jsx(f.Title,{as:"h3",children:"Простите, нет предметов"})})]})};export{F as default};
